<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Shareabouts</title>
  <meta name="description" content="Shareabouts is awesome!">
  <meta name="author" content="">

  <!--  Mobile Viewport Fix -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <!-- Favicon & Progressively-Enhanced Touch Icons: http://mathiasbynens.be/notes/touch-icons#sizes -->
  <link rel="shortcut icon" href="{{ STATIC_URL }}sa/css/images/favicon.ico">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="{{ STATIC_URL }}sa/css/images/apple-touch-icon-144x144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="{{ STATIC_URL }}sa/css/images/apple-touch-icon-114x114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="{{ STATIC_URL }}sa/css/images/apple-touch-icon-72x72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="{{ STATIC_URL }}sa/css/images/apple-touch-icon-precomposed.png">

  <!--  Google WebFonts -->
  <link href='http://fonts.googleapis.com/css?family=Dancing+Script:700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="{{ STATIC_URL }}sa/css/style.css">

  <link rel="profile" href="http://gmpg.org/xfn/11" />

  <link rel="stylesheet" href="http://code.leafletjs.com/leaflet-0.3.1/leaflet.css" />
  <!--[if lte IE 8]>
    <link rel="stylesheet" href="http://code.leafletjs.com/leaflet-0.3.1/leaflet.ie.css" />
  <![endif]-->
  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
  <![endif]-->
</head>
<body>

  <header id="site-header" class="clearfix">
    <h1 id="site-title"><a href="#">Shareabouts</a></h1>

    <div id="user-menu">
      <span class="sign-in-text">Sign in with</span> <a href="#" class="login facebook-login">Facebook</a> <span class="hidden">or</span> <a href="#" class="login twitter-login">Twitter</a><span class="hidden">.</span>
    </div>

    <nav id="access" role="article">
      <ul class="menu">
        <li class="menu-item menu-item-1"><a href="#">Link One</a></li>
        <li class="menu-item menu-item-2">
          <a href="#">Link Two</a>
          <ul>
            <li class="menu-item menu-item-5"><a href="#">Link Five</a></li>
            <li class="menu-item menu-item-6"><a href="#">Link Six</a></li>
          </ul>
        </li>
        <li class="menu-item menu-item-3"><a href="#">Link Three</a></li>
      </ul>
    </nav>
  </header>

  <div role="main" id="main">
    <div id="map-container">
      <div id="map"></div>
      <a href="#" id="add-feature-point" class="add-feature-point visuallyhidden">Add Location</a><!-- FIXME: toggling content should inversely toggle this button via .visuallyhidden -->
      <img id="crosshairs" src="{{ STATIC_URL }}sa/css/images/crosshair.png" class="visuallyhidden" />
      <span id="newpin" class="offcenter"><span class="shadow"></span><span class="x"></span><img src="{{ STATIC_URL }}sa/css/images/marker-plus.png" /></span>
    </div>

    <div id="content">
      <a href="#" class="close-bttn">&times;<span> Close</span></a>
      <article class="point"><!-- .point or .page -->
        <h4 class="">Tell us more&hellip;</h4>

        <form id="new_point" class="new_point" action="#" method="post">

          <fieldset>
            <p>
              <label for="user_name">Your Name</label>
              <input id="user_name" name="user_name" placeholder="Name" size="30" type="text">
              <br />
              <span class="sign-in-text">Or sign in with</span>
              <a href="#" class="login facebook">Facebook</a>
              <span class="">/</span>
              <a href="#" class="login twitter">Twitter</a>
            </p>

            <p>
              <label for="point_name">Location Name</label>
              <input id="point_name" name="point_name" placeholder="Location Name" size="30" type="text">
            </p>

            <p>
              <label for="point_type">Location Type</label>
              <select id="point_type" name="point_type">
                <option value=""></option>
                <option value="Foo">Foo</option>
                <option value="Bar">Bar</option>
                <option value="Querty">Querty</option>
              </select>
            </p>

            <p>
              <label for="point_description">Description</label>
              <textarea id="point_description" name="point_description" placeholder="Description..."></textarea>
            </p>
          </fieldset>

          <input name="new_point_submit" type="submit" value="Submit Location" class="bttn">

        </form>

      </article>
    </div><!-- end #content -->
  </div><!-- end #main -->

  <div id="ticker">
    <ul>
      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Manhattan</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Greenpoint</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge vote"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> supported Username's point in Manhattan</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Long Island City</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge comment"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> commented on Username's point in Astoria: "Lorem ipsum dolor set amet&hellip;"</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge comment"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> commented on Username's point in Manhattan: "Lorem ipsum dolor set amet&hellip;"</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Williamsburg</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Manhattan</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Greenpoint</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge vote"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> supported Username's point in Manhattan</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Long Island City</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge comment"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> commented on Username's point in Astoria: "Lorem ipsum dolor set amet&hellip;"</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge comment"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> commented on Username's point in Manhattan: "Lorem ipsum dolor set amet&hellip;"</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Williamsburg</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Manhattan</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Greenpoint</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge vote"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> commented on Username's point in Manhattan: "Lorem ipsum dolor set amet&hellip;"</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Long Island City</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge comment"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> commented on Username's point in Astoria: "Lorem ipsum dolor set amet&hellip;"</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge comment"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> commented on Username's point in Manhattan: "Lorem ipsum dolor set amet&hellip;"</a>
      </li>

      <li class="clearfix" data-id="137" data-feature-id="68">
        <img class="avatar" src="{{ STATIC_URL }}sa/css/images/user-28.png" />
        <span class="badge add"></span><!-- .add, .vote, or .comment -->
        <a href="#"><strong>Username</strong> added a point in Williamsburg</a>
      </li>
    </ul>
  </div><!-- end #ticker -->

  <footer id="colophon">
  </footer>

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="javascripts/jquery-1.7.1.min.js"><\/script>')</script><!-- FIXME: Maybe this should be pulled into the repo as a git submodule-->

  <script src="http://code.leafletjs.com/leaflet-0.3.1/leaflet.js"></script>
  <script src="{{STATIC_URL}}libs/underscore-min.js"></script>
  <script src="{{STATIC_URL}}libs/backbone-min.js"></script>

  <script src="{{STATIC_URL}}sa/js/models.js"></script>
  <script src="{{STATIC_URL}}sa/js/views.js"></script>

  <script type="text/javascript">
    Shareabouts.App = Backbone.Router.extend({
      routes: {
        '': 'default'
      },

      default: function() {
        this.appView = new Shareabouts.AppView({
          el: 'body',
          collection: new Shareabouts.PlaceCollection()
        });
      }
    });

    Shareabouts.AppView = Backbone.View.extend({
      events: {
        'click #add-feature-point': 'addPlace'
      },
      initialize: function(){
        this.mapView = new Shareabouts.MapView({
          el: '#map',
          lat: 39.9523524,
          lng: -75.1636075,
          zoom: 14,
          collection: this.collection
        });

        this.placeFormViews = {};

        // this.collection.on('reset', , this);
        this.collection.on('add', this.addPlaceFormView, this);
      },
      render: function(){},
      addPlace: function() {
        var center = this.mapView.map.getCenter(),
            // Create a new place model at map center
            placeModel = new Backbone.Model({
              lat: center.lat,
              lng: center.lng
            });

        // Add to the collection
        this.collection.add(placeModel);

        // Trigger 'focus' on the model
        placeModel.trigger('focus');

        // Hide the crosshairs
      },
      addPlaceFormView: function(model) {
        this.placeFormViews[model.cid] = new Shareabouts.PlaceFormView({
          el: '#content article',
          panelEl: '#content',
          crosshairEl: '#crosshairs',
          closeBtnEl: '.close-bttn',
          model: model
        });
      }
    });

    jQuery(function ($) {
      $(document).ready(function() {

        // add menu button for small screens
        $('<a href="#" id="nav-bttn">&equiv;</a>').insertAfter('#site-title');

        // toggle menu visibility
        $('#nav-bttn').click(function(){
          $('#access').toggleClass('expose');
          return false;
        });

        $('.close-bttn').click(function(){
          $('#content').toggle();
          $('#add-feature-point').removeClass('visuallyhidden');
          $('#crosshairs').removeClass('visuallyhidden');
          $('#newpin').hide();
          return false;
        });

        window.app = new Shareabouts.App();
        Backbone.history.start();
      });
    });
  </script>

</body>
</html>
